document.addEventListener('DOMContentLoaded', () => {
    /* --- CARROSSEL --- */
    const wrapper = document.getElementById('carouselWrapper');
    const images = document.querySelectorAll('.carousel-image');
    const reflection = document.getElementById('carouselReflection');
    let currentIndex = 0;
    const totalImages = images.length;
    const intervalTime = 3500;

    function updateReflection() {
        if (images.length > 0) {
            const currentImageSrc = images[currentIndex].src;
            if (reflection) reflection.style.backgroundImage = `url('${currentImageSrc}')`;
        }
    }
    updateReflection();

    function nextSlide() {
        currentIndex++;
        if (currentIndex >= totalImages) {
            currentIndex = 0;
        }
        if (wrapper) {
            wrapper.style.transform = `translateX(-${currentIndex * 100}vw)`;
            updateReflection();
        }
    }
    if (totalImages > 0) setInterval(nextSlide, intervalTime);

    /* --- SCROLL SUAVE CENTRALIZADO --- */
    // Aplica o scroll suave para todos os links internos, exceto os do dropdown de perfil
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            // Verifica se o link clicado NÃO é um item do dropdown de perfil ou o próprio ícone
            if (!this.closest('.profile-dropdown-container')) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                const targetElement = document.querySelector(targetId);

                if (targetElement) {
                    targetElement.scrollIntoView({
                        behavior: 'smooth',
                        block: 'center'
                    });
                }
            }
        });
    });
});